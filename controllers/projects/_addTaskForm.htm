<?php
  $request = 'onSaveTask';
  $name = $description = '';
  $request_data = 'data-request-data="';
  $title = 'Add Task';
  if(isset($id)) {
    $request_data .= 'id:'.$id;
    $title = 'Edit Task';
    $name = $task->name;
    $description = $task->description;
  } else {
    $request_data .= 'group_id:'.$group_id;
  }
  $request_data .= '" ';
?>
<form
  method="post"
  action="#"
  data-request-loading=".loading .loading-indicator-container"
  data-request="<?= $request; ?>" <?= $request_data; ?>
  data-request-success="saveTask(this,data<?php if(isset($id)): ?>,false<?php endif; ?>)">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="popup">Ã—</button>
    <h4 class="modal-title"><?= $title; ?></h4>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label>Task name</label>
      <input class="form-control" value="<?= $name; ?>" name="name" type="text">
    </div>
    <div class="form-group">
      <label>Task description</label>
      <textarea class="form-control" name="description"><?= $description; ?></textarea>
    </div>
  </div>
  <div class="modal-footer">
    <div class="loading">
      <div class="loading-indicator-container">
        <div class="loading-indicator size-small">
          <span></span>
        </div>
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Apply</button>
    <button type="button" class="btn btn-default" data-dismiss="popup">Cancel</button>
  </div>
</form>
